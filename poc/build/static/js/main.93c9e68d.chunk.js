(this.webpackJsonppoc=this.webpackJsonppoc||[]).push([[0],{121:function(e,t,n){e.exports={app:"app_app__WPEG2"}},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){"use strict";n.r(t);var c=n(5),a=n(1),r=n.n(a),o=n(20),s=n.n(o),i=n(25),u=n(35),l=n(116),d=n(117),j=n(126),m=n(124),p=n(281),h=n(280),b=n(123),f=n(270),O=n(271),x=n(272),v=n(273),y=n(274),g=n(275),E=n(276),_=n(277),k=n(278),C=n(279),D=n(282),N=n(118),T=n.n(N),w="VMS_FETCHED",S="VMS_FETCHED_SUCCEDDED",V="VM_FETCHED_STATUS",I="VM_FETCHED_STATUS_CLOSED",M="VM_DELETED",P="VM_POSTEDED",F=function(){return{type:w,payload:{}}},A=function(e){var t=e.vms;return{type:S,payload:{vms:t}}},H=n(13),L=n(283),z={ip:void 0},U=Object(H.c)({modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:var n=t.payload.ip;return{ip:n};case I:return z;default:return e}},byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{};case S:var n=t.payload.vms,c={};for(var a in n)c[a]=Object(u.a)(Object(u.a)({},n[a]),{},{machineType:n[a].machineType.substring(n[a].machineType.lastIndexOf("/")+1)});return c;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return[];case S:var n=t.payload.vms,c=Object.values(n).map((function(e,t){return t}));return c;default:return e}}}),R=Object(H.c)({vm:U,form:L.a}),q=function(e){return function(e){return e.order.map((function(t){return e.byId[t]}))}(e.vm)},B=function(e){return function(e){return e.modal.ip}(e.vm)},J=n(120),W=n(56),G=n.n(W),K=Object(i.b)((function(e){return{ip:B(e)}}),(function(e){return{closeModal:function(){e({type:I,payload:{}})}}}))((function(e){var t=e.closeModal,n=e.ip;return Object(c.jsx)(T.a,{isOpen:n,onRequestClose:t,className:G.a.content,overlayClassName:G.a.background,ariaHideApp:!1,shouldCloseOnOverlayClick:!0,children:Object(c.jsx)(J.a,{url:"http://".concat(n,":8000/logs.txt"),id:"myId",className:G.a.code,display:"initial",position:"relative"})})})),Q=n(121),X=n.n(Q),Y=function(e){return e?void 0:"Requerido*"},Z=function(e){var t=e.input.onChange,n=e.placeholder,a=e.type,r=e.value,o=e.meta,s=o.error,i=o.touched;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(f.a,{type:a,placeholder:n,value:r,onChange:function(e){var n=e.target;return t(n.value)}}),Object(c.jsx)("label",{className:"error",children:i&&s})]})},$=[{text:"e1-micro",column:"e1-micro"},{text:"e1-small",column:"e1-small"},{text:"e1-medium",column:"e1-medium"}],ee=function(e){var t=e.input.onChange,n=e.placeholder,a=e.value,r=(e.options,e.meta),o=r.error,s=r.touched;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(b.a,{className:"react-select info",classNamePrefix:"react-select",onChange:function(e){return t(e.name)},value:a,options:$.map((function(e){return{name:e,label:e.text}})),placeholder:n}),Object(c.jsx)("label",{className:"error",children:s&&o})]})},te=[{text:"Nombre",column:"name"},{text:"Tipo",column:"machineType"},{text:"IP",column:"publicIp",link:!0},{text:"d\xeda creado",column:"dateCreated"}],ne=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchVms)()}},{key:"render",value:function(){var e=this.props,t=e.createVm,n=e.deleteVm,a=e.handleSubmit,r=e.fetchVms,o=e.vms,s=e.fetchVmStatus;return Object(c.jsxs)("div",{className:"main-panel ".concat(X.a.app),data:"blue",children:[Object(c.jsx)(K,{}),Object(c.jsx)(O.a,{children:Object(c.jsx)(x.a,{children:Object(c.jsxs)("form",{onSubmit:a(t.bind(this)),children:[Object(c.jsx)(v.a,{children:"Crear Instancia"}),Object(c.jsx)(y.a,{children:Object(c.jsx)(g.a,{sm:"11",children:Object(c.jsxs)(y.a,{children:[Object(c.jsx)(g.a,{children:Object(c.jsx)(E.a,{children:Object(c.jsx)(p.a,{name:"name",component:Z,placeholder:"nombre",validate:[Y]})})}),Object(c.jsx)(g.a,{children:Object(c.jsx)(E.a,{children:Object(c.jsx)(p.a,{name:"tipo",component:ee,placeholder:"tipo",validate:[Y]})})}),Object(c.jsx)(g.a,{children:Object(c.jsx)(E.a,{children:Object(c.jsx)(p.a,{name:"repo",component:Z,placeholder:"repo",validate:[Y]})})}),Object(c.jsxs)(g.a,{md:{offset:1},children:[Object(c.jsx)(_.a,{color:"info",type:"submit",children:"Agregar"}),Object(c.jsx)(_.a,{color:"info",onClick:r.bind(this),children:"Cargar"})]})]})})})]})})}),Object(c.jsx)(y.a,{children:Object(c.jsx)(g.a,{md:"12",children:Object(c.jsxs)(O.a,{children:[Object(c.jsx)(k.a,{children:Object(c.jsx)(v.a,{tag:"h4",children:"Instancias:"})}),Object(c.jsx)(x.a,{children:Object(c.jsxs)(C.a,{children:[Object(c.jsx)("thead",{className:"text-primary",children:Object(c.jsxs)("tr",{children:[te.map((function(e){return Object(c.jsx)("th",{className:e.className,children:Object(c.jsx)("p",{children:e.text})})})),Object(c.jsx)("th",{className:"text-right",children:"Actions"})]})}),Object(c.jsx)("tbody",{children:o.map((function(e){return Object(c.jsxs)("tr",{children:[te.map((function(t){return Object(c.jsx)("td",{className:t.className,children:t.link?Object(c.jsxs)("a",{href:"http://".concat(e[t.column],":8080/blue/organizations/jenkins/pipelines"),target:"_blank",rel:"noreferrer",children:["http://",e[t.column]]}):Object(c.jsx)("p",{children:e[t.column]})})})),Object(c.jsxs)("td",{className:"text-right",children:[Object(c.jsx)(_.a,{className:"btn-link",color:"success",id:"tooltip1",size:"sm",onClick:function(){return s(e.publicIp)},children:Object(c.jsx)("i",{className:"tim-icons icon-pencil"})}),Object(c.jsx)(D.a,{delay:0,target:"tooltip1",children:"Revisar"}),Object(c.jsx)(_.a,{className:"btn-link",color:"danger",id:"tooltip2",size:"sm",onClick:function(){return n(e.name)},children:Object(c.jsx)("i",{className:"tim-icons icon-simple-remove"})}),Object(c.jsx)(D.a,{delay:0,target:"tooltip2",children:"Eliminar"})]})]})}))})]})})]})})})]})}}]),n}(r.a.Component),ce=Object(h.a)({form:"App"})(ne),ae=Object(i.b)((function(e){return{vms:q(e)}}),(function(e){return{fetchVms:function(){e(F())},fetchVmStatus:function(t){e(function(e){var t=e.ip;return{type:V,payload:{ip:t}}}({ip:t}))},createVm:function(t){e(function(e){var t=e.name,n=e.type;return{type:P,payload:{name:t,type:n}}}(Object(u.a)(Object(u.a)({},t),{},{type:t.tipo.column})))},deleteVm:function(t){e(function(e){var t=e.name;return{type:M,payload:{name:t}}}({name:t}))}}}))(ce),re=n(125),oe=n(22),se=n.n(oe),ie=n(19),ue="http://localhost:4000",le=function(){return new Promise((function(e,t){fetch("".concat(ue,"/vms/")).then((function(n){n.ok?n.json().then((function(t){return e(t)})):n.json().then((function(e){return t(e)}))})).catch((function(e){return t(e)}))}))},de=function(e,t){return new Promise((function(n,c){fetch("".concat(ue,"/createvm?name=").concat(e,"&type=").concat(t),{method:"POST"}).then((function(e){e.ok?e.json().then((function(e){return n(e)})):e.json().then((function(e){return c(e)}))})).catch((function(e){return c(e)}))}))},je=function(e){return new Promise((function(t,n){fetch("".concat(ue,"/deletevm?name=").concat(e),{method:"POST"}).then((function(e){e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){return n(e)}))})).catch((function(e){return n(e)}))}))},me=se.a.mark(fe),pe=se.a.mark(Oe),he=se.a.mark(xe),be=se.a.mark(ve);function fe(){var e;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ie.b)(le);case 3:return e=t.sent,t.next=6,Object(ie.d)(A({vms:e}));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(ie.d)({type:"VMS_FETCHED_FAILED",payload:{message:{message:t.t0.message}.message}});case 12:case"end":return t.stop()}}),me,null,[[0,8]])}function Oe(e){var t,n,c,a,r;return se.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.name,c=t.type,o.prev=1,o.next=4,Object(ie.b)(de,n,c);case 4:return a=o.sent,r=a.response,o.next=8,Object(ie.d)(A({vms:r}));case 8:o.next=14;break;case 10:return o.prev=10,o.t0=o.catch(1),o.next=14,Object(ie.d)({type:"VM_POSTEDED_SUCCEDDED",payload:{message:{message:o.t0.message}.message}});case 14:case"end":return o.stop()}}),pe,null,[[1,10]])}function xe(e){var t;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.name,n.prev=1,n.next=4,Object(ie.b)(je,t);case 4:return n.next=6,Object(ie.d)(F());case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),n.next=12,Object(ie.d)({type:"VM_DELETED_FAILED",payload:{message:{message:n.t0.message}.message}});case 12:case"end":return n.stop()}}),he,null,[[1,8]])}function ve(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.e)(w,fe);case 2:return e.next=4,Object(ie.e)(P,Oe);case 4:return e.next=6,Object(ie.e)(M,xe);case 6:case"end":return e.stop()}}),be)}var ye=ve,ge=se.a.mark(Ee);function Ee(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.a)([Object(ie.c)(ye)]);case 2:case"end":return e.stop()}}),ge)}var _e=Ee,ke=Object(re.a)(),Ce=function(){var e=Object(H.e)(R,Object(H.d)(Object(H.a)(ke)));return ke.run(_e),e};n(263),n(264),n(265),n(266);s.a.render(Object(c.jsx)(i.a,{store:Ce(),children:Object(c.jsx)(ae,{})}),document.getElementById("root"))},56:function(e,t,n){e.exports={background:"modal_background__2hWb4",content:"modal_content__1yKzo",code:"modal_code__1uBmN"}}},[[267,1,2]]]);
//# sourceMappingURL=main.93c9e68d.chunk.js.map